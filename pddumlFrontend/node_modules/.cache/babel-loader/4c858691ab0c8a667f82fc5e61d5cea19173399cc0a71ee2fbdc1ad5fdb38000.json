{"ast":null,"code":"import _slicedToArray from\"/home/tanmay/Desktop/Tanmay Engineering/BEProject/FrontEnd/pddumlFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component}from'react';import axios from'axios';import{useState}from'react';import'./Nav.css';import{decode}from'jpeg-js';// import { Alert } from 'react-alert'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Form(){var _useState=useState(\" \"),_useState2=_slicedToArray(_useState,2),plant=_useState2[0],setPlant=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),imgfile=_useState4[0],setImgfile=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedFile=_useState6[0],setselectedFile=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),result=_useState8[0],setResult=_useState8[1];var _useState9=useState(\" \"),_useState10=_slicedToArray(_useState9,2),plantname=_useState10[0],setPlantname=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),cnnimg=_useState12[0],setImgCNN=_useState12[1];var onFileChange=function onFileChange(name){setResult(\"\");console.log(imgfile.length);var file=name.target.files[0];setPlant(URL.createObjectURL(name.target.files[0]));// Create a new FileReader object to read the file as an array buffer\nvar reader=new FileReader();// Set up an event listener for when the file has finished loading\nreader.addEventListener('load',function(event){// Get the array buffer from the loaded file data\nvar arrayBuffer=event.target.result;// Decode the JPEG image data and get the pixel values\nvar imageData=decode(new Uint8Array(arrayBuffer),{useTArray:true});// setImgCNN(imageData);\nvar temp=[];var cnntemp=[];// Loop over the pixels in the image data and read their values\nfor(var y=0;y<imageData.height;y++){var line=[];for(var x=0;x<imageData.width;x++){var index=(y*imageData.width+x)*4;var red=imageData.data[index];var green=imageData.data[index+1];var blue=imageData.data[index+2];var alpha=imageData.data[index+3];temp.push(blue);line.push([red,green,blue]);// Do something with the pixel data here\n// console.log(`Pixel at (${x}, ${y}): (${red}, ${green}, ${blue}, ${alpha})`);\n}cnntemp.push(line);}setImgfile(temp);setImgCNN(cnntemp);});// Start reading the file as an array buffer\nreader.readAsArrayBuffer(file);};var onFileUpload=function onFileUpload(){// console.log(imgfile,imgfile.length)\naxios.post(\"http://127.0.0.1:8000/gettomoato/\",{imagefile:imgfile,plantname:plantname,CNNImg:cnnimg}).then(function(data){// if (data.data.status===\"success\"){\nconsole.log(data.data);alert(\"Plant - \"+data.data.plantname+\"\\nDisease - \"+data.data.disease+\"\\nConfidence - \"+data.data.confidence+\"\\n\"+data.data.comments);// alert(\"The \"+plantname+\" Plant is \" + data.data.result)\n// setResult(\"The \"+plantname+\" Plant is \" + data.data.result)\n// setImgfile([])\n// }\n});// Create an object of formData\n// const formData = new FormData();\n// // Update the formData object\n// formData.append(\n//   \"myFile\",\n// selectedFile,\n//   selectedFile.name\n// );\n// console.log(selectedFile)\n// Details of the uploaded file\n//     let output = \"\";\n// for (const [key, value] of formData) {\n//   // output += `${key}: ${value}\\n`;\n//   console.log(value)\n// }\n//    console.log(output)\n// Request made to the backend api\n// Send formData object\n// axios.post(\"api/uploadfile\", formData);\n};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:result}),/*#__PURE__*/_jsx(\"img\",{height:250,width:250,src:plant})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Upload Image of leaf:              \"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"imagefile\",id:\"imgfile\",onChange:function onChange(name){return onFileChange(name);},required:true})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",value:\"Submit\",onClick:function onClick(){onFileUpload();},children:\"Submit\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",value:\"Reset\",children:\"Reset\"})})]})]})});}export default Form;","map":{"version":3,"names":["React","Component","axios","useState","decode","Form","plant","setPlant","imgfile","setImgfile","selectedFile","setselectedFile","result","setResult","plantname","setPlantname","cnnimg","setImgCNN","onFileChange","name","console","log","length","file","target","files","URL","createObjectURL","reader","FileReader","addEventListener","event","arrayBuffer","imageData","Uint8Array","useTArray","temp","cnntemp","y","height","line","x","width","index","red","data","green","blue","alpha","push","readAsArrayBuffer","onFileUpload","post","imagefile","CNNImg","then","alert","disease","confidence","comments"],"sources":["/home/tanmay/Desktop/Tanmay Engineering/BEProject/FrontEnd/pddumlFrontend/src/Form.js"],"sourcesContent":["import React, { Component }  from 'react';\nimport axios from 'axios';\nimport { useState } from 'react';\nimport './Nav.css'\nimport { decode } from 'jpeg-js';\n// import { Alert } from 'react-alert'\nfunction Form(){\n\n  const[plant,setPlant]= useState(\" \");\n  const [imgfile,setImgfile]= useState([]);\n  const [selectedFile,setselectedFile]=useState(null);\n  const [result,setResult] = useState(\"\")\n  const[plantname,setPlantname]= useState(\" \");\n  const [cnnimg,setImgCNN]=useState(\"\")\n const  onFileChange = name => {\n  setResult(\"\")\n\n  console.log(imgfile.length)\n  const file = name.target.files[0];\nsetPlant(URL.createObjectURL(name.target.files[0]))\n  // Create a new FileReader object to read the file as an array buffer\n  const reader = new FileReader();\n  \n  // Set up an event listener for when the file has finished loading\n  reader.addEventListener('load', (event) => {\n    // Get the array buffer from the loaded file data\n    const arrayBuffer = event.target.result;\n  \n    // Decode the JPEG image data and get the pixel values\n    const imageData = decode(new Uint8Array(arrayBuffer), { useTArray: true });\n    // setImgCNN(imageData);\n  var temp=[];\n  var cnntemp = [];\n    // Loop over the pixels in the image data and read their values\n    for (let y = 0; y < imageData.height; y++) {\n      var line = [];\n      for (let x = 0; x < imageData.width; x++) {\n        const index = (y * imageData.width + x) * 4;\n        const red = imageData.data[index];\n        const green = imageData.data[index + 1];\n        const blue = imageData.data[index + 2];\n        const alpha = imageData.data[index + 3];\n      \n        temp.push(blue);\n        line.push([red,green,blue])\n     \n  \n        // Do something with the pixel data here\n        // console.log(`Pixel at (${x}, ${y}): (${red}, ${green}, ${blue}, ${alpha})`);\n      }\n      cnntemp.push(line);\n    }\n    setImgfile(temp)\n    setImgCNN(cnntemp)\n  });\n  \n  // Start reading the file as an array buffer\n  reader.readAsArrayBuffer(file);\n}\n  \n  \n const  onFileUpload = () => {\n// console.log(imgfile,imgfile.length)\naxios.post(\"http://127.0.0.1:8000/gettomoato/\",{imagefile:imgfile,plantname:plantname,CNNImg:cnnimg})\n.then(data=>{\n  // if (data.data.status===\"success\"){\n    console.log(data.data)\n    alert(\"Plant - \"+data.data.plantname+\"\\nDisease - \"+data.data.disease+\"\\nConfidence - \"+data.data.confidence+\"\\n\"+data.data.comments)\n    // alert(\"The \"+plantname+\" Plant is \" + data.data.result)\n    // setResult(\"The \"+plantname+\" Plant is \" + data.data.result)\n    // setImgfile([])\n  // }\n})\n\n    // Create an object of formData\n    // const formData = new FormData();\n   \n    // // Update the formData object\n    // formData.append(\n    //   \"myFile\",\n    // selectedFile,\n    //   selectedFile.name\n    // );\n  \n    // console.log(selectedFile)\n    // Details of the uploaded file\n//     let output = \"\";\n// for (const [key, value] of formData) {\n//   // output += `${key}: ${value}\\n`;\n//   console.log(value)\n// }\n//    console.log(output)\n    // Request made to the backend api\n    // Send formData object\n    // axios.post(\"api/uploadfile\", formData);\n  };\n    return(<div className=\"App\">\n       <div className=\"Form\">\n<div className=\"box\">\n     <h3>{result}</h3>\n     <img height={250} width={250} src={plant}/>\n\n     </div>\n<div className= \"box\">\n\n      <p>\n        <strong>Upload Image of leaf:              </strong>\n      <input type=\"file\" name=\"imagefile\" id=\"imgfile\" onChange={(name)=>onFileChange(name)} required /></p>\n      {/* <p><strong>Select Plant:                      </strong>\n      \n      <select name=\"plantname\" id=\"plantname\" onChange={(name)=>setPlantname(name.target.value)} required>\n      <option value=\"\">Select Plant Name</option>\n        <option value=\"tomato\">Tomato</option>\n        <option value=\"bellpepper\">Papper Bell </option>\n        <option value=\"potato\">Potato</option>\n      </select></p> */}\n      <p><button className='btn' value=\"Submit\" \n      onClick={()=>{onFileUpload()}}>Submit</button></p>\n\n      <p><button className='btn'  value=\"Reset\" >Reset</button></p>\n\n      </div>\n    </div>\n  </div>\n    );\n}\nexport default Form;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}